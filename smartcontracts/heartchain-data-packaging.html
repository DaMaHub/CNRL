<html>
<head>
  <title>HeartChain - PACKAGING</title>
  <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' rel='stylesheet' type='text/css'>
  <script src="web3-1b.js"></script>
</head>
<body class="container">
  <h1>Packaging dataTypes</h1>
  <form id="proposal-form" accept-charset="UTF-8">
    <ul>
			<li>
			     <h2>Mapping</h2>
			</li>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg .tg-0lax{text-align:left;vertical-align:top}
</style>
<h2>Columns</h2>
<button onclick="" type="button" class="btn-new-column">Add column</button>
<table class="tg">
  <tr>
    <th class="tg-0lax">Column1</th>
    <th class="tg-0lax">Column2</th>
    <th class="tg-0lax">Column3</th>
    <th class="tg-0lax">Column4</th>
    <th class="tg-0lax">Column5</th>
    <th class="tg-0lax">Column6</th>
    <th class="tg-0lax">Column7</th>
  </tr>
  <tr>
    <td class="tg-0lax">HEART_RATE</td>
    <td class="tg-0lax">STEPS</td>
    <td class="tg-0lax">RAW_KIND</td>
    <th class="tg-0lax">RAW_INTENSITY</th>
    <th class="tg-0lax">USER_ID</th>
    <th class="tg-0lax">DEVICE_ID</th>
    <th class="tg-0lax">TIMESTAMP</th>
  </tr>
  <tr>
    <td class="tg-0lax">bpm</td>
    <td class="tg-0lax">steps</td>
    <td class="tg-0lax">activtyCategory</td>
    <th class="tg-0lax">ledCategory</th>
    <th class="tg-0lax">identity</th>
    <th class="tg-0lax">hardware</th>
    <th class="tg-0lax">time</th>
  </tr>
  <tr>
    <td class="tg-0lax">SUB-CODING</td>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
    <th class="tg-0lax"></th>
    <th class="tg-0lax"></th>
    <th class="tg-0lax"></th>
    <th class="tg-0lax"></th>
  </tr>
  <tr>
    <td class="tg-0lax">255</td>
    <td class="tg-0lax">0</td>
    <td class="tg-0lax">-</td>
    <th class="tg-0lax">-</th>
    <th class="tg-0lax">-</th>
    <th class="tg-0lax">-</th>
    <th class="tg-0lax">-</th>
  </tr>
</table>
      <li>
          <button onclick="submitProposal()" type="button" class="btn btn-primary">Save Packaging</button>
      </li>
	  </ul>

  </form>

<script>
  if (typeof web3 !== 'undefined') {
            web3 = new Web3(web3.currentProvider);
        } else {
            // set the provider you want from Web3.providers
            web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
        }
  web3.eth.defaultAccount = '0x0b3333b602de2a1e4b922e3c12f95fab2f68f5d6';

// Define the address to search witin.  CHANGE TO PULIC ADDRESSS ACTIVE private/test/live network
const addr = ('0x0b3333b602de2a1e4b922e3c12f95fab2f68f5d6')

// Use Wb3 to get the balance of the address, convert it and then show it in the console.
web3.eth.getBalance(addr, function (error, result) {
	if (!error)
    //console.log('blance -- ')
    console.log(result)
    //console.log('balance');
		//console.log('Ether:', web3.utils.fromWei(result,'ether')); // Show the ether balance after converting it from Wei
	else
		console.log('Huston we have a promblem: ', error) // Should dump errors here
});

// deploy the contracts
var abi = ``;

  var Jabi = JSON.parse(abi)
  var liveContract = '0x';
  var myDatatype = new web3.eth.Contract(Jabi, liveContract);
// console.log(myContract);

  function submitProposal() {
    console.log('click')
    var cOpts = document.getElementById("add-hc-cfc");
    console.log(cOpts)
    var cOpts2 = document.getElementById("add-github-url");
    console.log(cOpts2)
    var cOpts3 = document.getElementById("add-sameas-url");
    console.log(cOpts3)
    var cOpts4 = document.getElementById("add-sameas-url2");
    console.log(cOpts4)
    var cOpts5 = document.getElementById("add-sameas-url3");
    console.log(cOpts5)
    myDatatype.methods.registerDataType(cOpts, cOpts2).send({from: addr}).then(function(receipt){
        // receipt can also be a new contract instance, when coming fro
        console.log('call back from');
        console.log(receipt);
       });

    let bytearry = [];
    let makeByte31 = web3.utils.fromAscii(cOpts3);
    let makeByte32 = web3.utils.fromAscii(cOpts4);
    let makeByte33 = web3.utils.fromAscii(cOpts5);
    // console.log(makeByte32);
    bytearry.push(makeByte31)
    bytearry.push(makeByte32)
    bytearry.push(makeByte33)
    console.log(bytearry)
    myDatatype.methods.linkedData(bytearray).send({from: addr}).then(function(receipt){
        // receipt can also be a new contract instance, when coming fro
        console.log('call back from');
        console.log(receipt);
       });
    };
</script>
</body>
</html>
